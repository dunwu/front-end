(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{422:function(t,s,a){"use strict";a.r(s);var n=a(15),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"eslint-快速入门"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#eslint-快速入门"}},[t._v("#")]),t._v(" ESLint 快速入门")]),t._v(" "),a("blockquote",[a("p",[t._v("ESLint 是一种用于识别和报告 ECMAScript / JavaScript 代码中发现的模式的工具，目的是使代码更加一致并避免错误。")])]),t._v(" "),a("h2",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[t._v("#")]),t._v(" 安装")]),t._v(" "),a("h3",{attrs:{id:"本地安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#本地安装"}},[t._v("#")]),t._v(" 本地安装")]),t._v(" "),a("p",[t._v("如果要将 ESLint 作为项目构建系统的一部分，我们建议在本地进行安装。你可以使用 npm：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" eslint --save-dev\n")])])]),a("p",[t._v("然后您应该设置一个配置文件：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("$ ./node_modules/.bin/eslint --init\n")])])]),a("p",[t._v("之后，您可以在项目的根目录中运行 ESLint，如下所示：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("$ ./node_modules/.bin/eslint yourfile.js\n")])])]),a("p",[t._v("您使用的任何插件或可共享配置也必须在本地安装以与本地安装的 ESLint 配合使用。")]),t._v(" "),a("h3",{attrs:{id:"全局安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#全局安装"}},[t._v("#")]),t._v(" 全局安装")]),t._v(" "),a("p",[t._v("如果要使 ESLint 可用于跨所有项目运行的工具，我们建议在全局安装 ESLint。你可以使用 npm：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -g eslint\n")])])]),a("p",[t._v("然后您应该设置一个配置文件：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("$ eslint --init\n")])])]),a("p",[t._v("之后，您可以在任何文件或目录下运行 ESLint，如下所示：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("$ eslint yourfile.js\n")])])]),a("p",[t._v("您使用的任何插件或可共享配置也必须全局安装，才能使用全局安装的 ESLint。")]),t._v(" "),a("blockquote",[a("p",[t._v("注意：eslint --init 旨在根据每个项目设置和配置 ESLint，并将 ESLint 及其插件的本地安装运行在其运行的目录中。如果您希望使用 ESLint 的全局安装，则配置中使用的任何插件也必须全局安装")])]),t._v(" "),a("h2",{attrs:{id:"配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[t._v("#")]),t._v(" 配置")]),t._v(" "),a("p",[t._v("运行 "),a("code",[t._v("eslint --init")]),t._v(" 后，您的目录中将有一个 "),a("code",[t._v(".eslintrc")]),t._v(" 文件。在其中，您将看到一些如下配置的规则：")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"rules"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"semi"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"always"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"quotes"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"double"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("code",[t._v('"semi"')]),t._v(" 和 "),a("code",[t._v('"quotes"')]),t._v(" 是 ESLint 中规则的名称。第一个值是规则的错误级别，可以是以下值之一：")]),t._v(" "),a("p",[a("code",[t._v('"off"')]),t._v(" or "),a("code",[t._v("0")]),t._v(" -  关闭规则")]),t._v(" "),a("p",[a("code",[t._v('"warn"')]),t._v(" or "),a("code",[t._v("1")]),t._v(" -  将规则作为警告（不影响退出代码）")]),t._v(" "),a("p",[a("code",[t._v('"error"')]),t._v(" or "),a("code",[t._v("2")]),t._v(" -  将规则作为错误（退出代码将为 1）")]),t._v(" "),a("p",[t._v("这三个错误级别允许您细分控制 ESLint 如何应用规则（有关更多配置选项和详细信息，请参阅"),a("a",{attrs:{href:"https://eslint.org/docs/user-guide/configuring",target:"_blank",rel:"noopener noreferrer"}},[t._v("配置文档"),a("OutboundLink")],1),t._v("）。")]),t._v(" "),a("p",[t._v("您的 "),a("code",[t._v(".eslintrc")]),t._v(" 配置文件也将包括以下行：")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"extends"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"eslint:recommended"')]),t._v("\n")])])]),a("p",[t._v("由于这一行，"),a("a",{attrs:{href:"https://eslint.org/docs/rules/",target:"_blank",rel:"noopener noreferrer"}},[t._v("规则页面"),a("OutboundLink")],1),t._v("上的所有打钩的规则都将被打开。或者，您可以通过在  "),a("a",{attrs:{href:"https://www.npmjs.com/search?q=eslint-config",target:"_blank",rel:"noopener noreferrer"}},[t._v("npmjs.com"),a("OutboundLink")],1),t._v(" 上搜索 “eslint-config” 来使用其他人创建的配置。 ESLint 不会删除您的代码，除非您从共享配置中扩展或在配置中明确地打开规则。")]),t._v(" "),a("h2",{attrs:{id:"实战"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实战"}},[t._v("#")]),t._v(" 实战")]),t._v(" "),a("p",[t._v("React 项目中，通常会使用 React、JSX、ES6 等特性，所以 ESLint 推荐的检查规则可能还不能满足我们对代码检查的需要。")]),t._v(" "),a("h3",{attrs:{id:"eslint-集成-airbnb"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#eslint-集成-airbnb"}},[t._v("#")]),t._v(" ESLint 集成 Airbnb")]),t._v(" "),a("p",[t._v("业界比较流行的 "),a("a",{attrs:{href:"https://github.com/airbnb/javascript",target:"_blank",rel:"noopener noreferrer"}},[t._v("Airbnb JavaScript Style"),a("OutboundLink")],1),t._v(" 可以说是一个不错的选择。")]),t._v(" "),a("p",[a("strong",[t._v("那么如何让 ESLint 支持 Airbnb 呢？")])]),t._v(" "),a("p",[t._v("下面将一一道来。")]),t._v(" "),a("h4",{attrs:{id:"eslint-config-airbnb"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#eslint-config-airbnb"}},[t._v("#")]),t._v(" eslint-config-airbnb")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.npmjs.com/package/eslint-config-airbnb",target:"_blank",rel:"noopener noreferrer"}},[t._v("eslint-config-airbnb"),a("OutboundLink")],1),t._v(" 该包将 Airbnb 的规则作为 ESLint 可扩展的共享配置。")]),t._v(" "),a("p",[a("strong",[t._v("安装方法一")])]),t._v(" "),a("p",[t._v("执行 "),a("code",[t._v("eslint --init")]),t._v(" 命令，依次选择 "),a("strong",[t._v("Use a popular style guide")]),t._v(" -> "),a("strong",[t._v("Airbnb")])]),t._v(" "),a("p",[t._v("ESLint 会自动下载 Airbnb 扩展所需的所有插件。")]),t._v(" "),a("p",[a("strong",[t._v("安装方法二")])]),t._v(" "),a("p",[t._v("ESLint 默认的下载地址是 https://registry.npmjs.org/ ，由于是外网，可能会很慢。")]),t._v(" "),a("p",[t._v("如果你使用淘宝的 cnpm，也可以自己下载 Airbnb 扩展所需的插件：")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.npmjs.com/package/eslint-config-airbnb",target:"_blank",rel:"noopener noreferrer"}},[t._v("eslint-config-airbnb"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/benmosher/eslint-plugin-import",target:"_blank",rel:"noopener noreferrer"}},[t._v("eslint-plugin-import"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/evcohen/eslint-plugin-jsx-a11y",target:"_blank",rel:"noopener noreferrer"}},[t._v("eslint-plugin-jsx-a11y"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/yannickcr/eslint-plugin-react",target:"_blank",rel:"noopener noreferrer"}},[t._v("eslint-plugin-react"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("执行安装命令：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("$ cnpm i -D eslint-plugin-import eslint-plugin-jsx-a11y eslint-plugin-react eslint-config-airbnb\n")])])]),a("h4",{attrs:{id:"babel-eslint"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#babel-eslint"}},[t._v("#")]),t._v(" babel-eslint")]),t._v(" "),a("p",[t._v("由于 React 项目往往会使用 ES6 特性。ES6 若想识别 ES6 特性，需要相应的解析器，"),a("a",{attrs:{href:"https://github.com/babel/babel-eslint",target:"_blank",rel:"noopener noreferrer"}},[t._v("babel-eslint"),a("OutboundLink")],1),t._v(" 是比较流行的选择。")]),t._v(" "),a("p",[t._v("执行安装命令：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("$ cnpm i -D babel-eslint\n")])])]),a("h4",{attrs:{id:"配置-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置-2"}},[t._v("#")]),t._v(" 配置")]),t._v(" "),a("p",[t._v("ESLint 支持几种格式的配置文件，个人推荐使用 "),a("code",[t._v(".eslintrc.js")]),t._v(" ，这是官方优先级最高的配置文件。")]),t._v(" "),a("p",[t._v("配置文件中配置 Airbnb 有几个重点项：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 指定校验的环境")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'env'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'browser'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'node'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'es6'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'commonjs'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 指定扩展标准")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'extends'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'airbnb'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 指定解析器")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'parser'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'babel-eslint'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 指定插件")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'plugins'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'import'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'jsx-a11y'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'rules'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("Airbnb 的检查规则是比较严格的，如果你认为有些检查项没有必要，也可以自行在 "),a("code",[t._v("rules")]),t._v(" 中修改。")]),t._v(" "),a("h4",{attrs:{id:"实例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实例"}},[t._v("#")]),t._v(" 实例")]),t._v(" "),a("p",[t._v("这里，我抛砖引玉一下，给大家提供一个我自己的 DEMO 项目："),a("a",{attrs:{href:"https://github.com/dunwu/frontend-tutorial/tree/master/codes/chapter04/jigsaw",target:"_blank",rel:"noopener noreferrer"}},[t._v("Demo"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("我在 "),a("code",[t._v("config/.eslintrc.js")]),t._v(" 中基于 "),a("a",{attrs:{href:"https://www.npmjs.com/package/eslint-config-airbnb",target:"_blank",rel:"noopener noreferrer"}},[t._v("eslint-config-airbnb"),a("OutboundLink")],1),t._v(" 修改了一些定制的规则。")])])}),[],!1,null,null,null);s.default=e.exports}}]);