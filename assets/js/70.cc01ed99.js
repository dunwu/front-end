(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{457:function(t,a,s){"use strict";s.r(a);var e=s(15),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"webpack-开发工具"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack-开发工具"}},[t._v("#")]),t._v(" Webpack 开发工具")]),t._v(" "),s("blockquote",[s("p",[t._v("​⚠️  "),s("strong",[t._v("注意：")]),t._v("\n永远不要在生产环境中使用这些工具，永远不要。")])]),t._v(" "),s("h2",{attrs:{id:"devtool"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#devtool"}},[t._v("#")]),t._v(" devtool")]),t._v(" "),s("p",[t._v("当 JavaScript 异常抛出时，你常会想知道这个错误发生在哪个文件的哪一行。然而因为 webpack 将文件输出为一个或多个 bundle，所以 追踪这一错误会很不方便。")]),t._v(" "),s("p",[s("strong",[t._v("Source maps")]),t._v(" 试图解决这一问题。它有很多选择，各有优劣：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("devtool")]),t._v(" "),s("th",[t._v("build")]),t._v(" "),s("th",[t._v("rebuild")]),t._v(" "),s("th",[t._v("production")]),t._v(" "),s("th",[t._v("quality")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("eval")]),t._v(" "),s("td",[t._v("+++")]),t._v(" "),s("td",[t._v("+++")]),t._v(" "),s("td",[t._v("no")]),t._v(" "),s("td",[t._v("generated code")])]),t._v(" "),s("tr",[s("td",[t._v("cheap-eval-source-map")]),t._v(" "),s("td",[t._v("+")]),t._v(" "),s("td",[t._v("++")]),t._v(" "),s("td",[t._v("no")]),t._v(" "),s("td",[t._v("transformed code (lines only)")])]),t._v(" "),s("tr",[s("td",[t._v("cheap-source-map")]),t._v(" "),s("td",[t._v("+")]),t._v(" "),s("td",[t._v("o")]),t._v(" "),s("td",[t._v("yes")]),t._v(" "),s("td",[t._v("transformed code (lines only)")])]),t._v(" "),s("tr",[s("td",[t._v("cheap-module-eval-source-map")]),t._v(" "),s("td",[t._v("o")]),t._v(" "),s("td",[t._v("++")]),t._v(" "),s("td",[t._v("no")]),t._v(" "),s("td",[t._v("original source (lines only)")])]),t._v(" "),s("tr",[s("td",[t._v("cheap-module-source-map")]),t._v(" "),s("td",[t._v("o")]),t._v(" "),s("td",[t._v("-")]),t._v(" "),s("td",[t._v("yes")]),t._v(" "),s("td",[t._v("original source (lines only)")])]),t._v(" "),s("tr",[s("td",[t._v("eval-source-map")]),t._v(" "),s("td",[t._v("--")]),t._v(" "),s("td",[t._v("+")]),t._v(" "),s("td",[t._v("no")]),t._v(" "),s("td",[t._v("original source")])]),t._v(" "),s("tr",[s("td",[t._v("source-map")]),t._v(" "),s("td",[t._v("--")]),t._v(" "),s("td",[t._v("--")]),t._v(" "),s("td",[t._v("yes")]),t._v(" "),s("td",[t._v("original source")])]),t._v(" "),s("tr",[s("td",[t._v("nosources-source-map")]),t._v(" "),s("td",[t._v("--")]),t._v(" "),s("td",[t._v("--")]),t._v(" "),s("td",[t._v("yes")]),t._v(" "),s("td",[t._v("without source content")])])])]),t._v(" "),s("blockquote",[s("p",[s("code",[t._v("+")]),t._v(" 表示较快，"),s("code",[t._v("-")]),t._v(" 表示较慢，"),s("code",[t._v("o")]),t._v(" 表示时间相同")])]),t._v(" "),s("p",[t._v("对于开发环境，通常希望更快速的 Source Map，需要添加到 bundle 中以增加体积为代价，但是对于生产环境，则希望更精准的 Source Map，需要从 bundle 中分离并独立存在。")]),t._v(" "),s("p",[t._v("个人建议：开发环境使用 "),s("code",[t._v("cheap-module-eval-source-map")]),t._v(" ；开发环境使用 "),s("code",[t._v("cheap-module-source-map")]),t._v(" 。")]),t._v(" "),s("p",[t._v("使用方式非常简单，在 "),s("code",[t._v("webpack.config.js")]),t._v(" 中配置如下：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 通过在浏览器调试工具(browser devtools)中添加元信息(meta info)增强调试")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// devtool: "eval", // 没有模块映射，而是命名模块。以牺牲细节达到最快。')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// devtool: "source-map", // 牺牲了构建速度的 `source-map\' 是最详细的')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// devtool: "inline-source-map", // 嵌入到源文件中')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// devtool: "eval-source-map", // 将 SourceMap 嵌入到每个模块中')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// devtool: "hidden-source-map", // SourceMap 不在源文件中引用')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// devtool: "cheap-source-map", // 没有模块映射(module mappings)的 SourceMap 低级变体(cheap-variant)')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// devtool: "cheap-module-source-map", // 有模块映射(module mappings)的 SourceMap 低级变体')]),t._v("\n  devtool"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cheap-module-eval-source-map"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"webpack-dev-server"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack-dev-server"}},[t._v("#")]),t._v(" webpack-dev-server")]),t._v(" "),s("p",[s("strong",[t._v("webpack-dev-server")]),t._v(" 可以提供了一个服务器和实时重载（live reloading） 功能。")]),t._v(" "),s("p",[t._v("在开始前，确定你有一个 "),s("code",[t._v("index.html")]),t._v(" 文件指向你的 bundle。假设 "),s("code",[t._v("output.filename")]),t._v(" 是 "),s("code",[t._v("bunlde.js")]),t._v("。")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text/javascript"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("./dist/bundle.js"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}}),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("首先从 npm 安装 "),s("code",[t._v("webpack-dev-server")]),t._v("：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" --save-dev webpack-dev-server\n")])])]),s("p",[t._v("安装完成之后，你应该可以使用 "),s("code",[t._v("webpack-dev-server")]),t._v(" 了，方式如下：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ webpack-dev-server --open\n")])])]),s("p",[t._v("上述命令应该自动在浏览器中打开 "),s("code",[t._v("http://localhost:8080")]),t._v("。")]),t._v(" "),s("blockquote",[s("p",[t._v("​📌 "),s("strong",[t._v("提示：")])]),t._v(" "),s("p",[t._v("本教程中的 "),s("a",{attrs:{href:"https://github.com/dunwu/frontend-tutorial/tree/master/codes",target:"_blank",rel:"noopener noreferrer"}},[s("strong",[t._v("示例代码")]),s("OutboundLink")],1),t._v(" 除了 "),s("code",[t._v("demo00")]),t._v(" ，都可以使用 webpack-dev-server 命令启动服务。")])]),t._v(" "),s("p",[t._v("在你的文件中做一点更改并且保存。你应该可以在控制台中看到正在编译。编译完成之后，页面应该会刷新。如果控制台中什么都没发生，你可能需要调整下 "),s("a",{attrs:{href:"https://doc.webpack-china.org/configuration/dev-server#devserver-watchoptions-",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("watchOptions")]),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("p",[t._v("默认情况下 webpack 会使用"),s("strong",[t._v("inline mode")]),t._v("（内联模式）。这种模式在你的 bundle 中注入客户端（用来 live reloading 和展示构建错误）。Inline 模式下，你会在你的 DevTools 控制台中看到构建错误。")]),t._v(" "),s("p",[s("strong",[t._v("webpack-dev-server")]),t._v(" 可以做很多事情，比如转发请求到你的后端服务器。")]),t._v(" "),s("p",[s("strong",[t._v("webpack-dev-server")]),t._v(" 支持很多 cli 参数，来手动配置服务的选项。")]),t._v(" "),s("p",[t._v("但是，个人建议，一种更好的做法是在 "),s("code",[t._v("webpack.config.js")]),t._v(" 文件中通过配置 "),s("code",[t._v("devServer")]),t._v(" 属性来配置 webpack-dev-server 。")]),t._v(" "),s("p",[t._v("更多配置项参考："),s("a",{attrs:{href:"https://doc.webpack-china.org/configuration/dev-server/",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方文档 - 开发中 Server(DevServer)"),s("OutboundLink")],1)]),t._v(" "),s("blockquote",[s("p",[t._v("​🔦 "),s("strong",[t._v("示例DEMO12：")]),t._v(" ("),s("a",{attrs:{href:"https://dunwu.github.io/frontend-tutorial/chapter03/webpack2/demo12/dist/index.html",target:"_blank",rel:"noopener noreferrer"}},[s("strong",[t._v("DEMO")]),s("OutboundLink")],1),t._v(" / "),s("a",{attrs:{href:"https://github.com/dunwu/frontend-tutorial/tree/master/codes/chapter03/webpack2/demo12",target:"_blank",rel:"noopener noreferrer"}},[s("strong",[t._v("SOURCE")]),s("OutboundLink")],1),t._v(")")]),t._v(" "),s("p",[t._v("在本示例中，devServer 配置如下：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('devServer: {\n  contentBase: [path.join(__dirname, "dist")],\n  compress: true,\n  port: 9000, // 启动端口号\n  inline: true,\n}\n')])])]),s("p",[t._v("执行 webpack-dev-server 后，会启动一个端口为 9000 的本地服务。")])]),t._v(" "),s("h3",{attrs:{id:"热模块替换-hot-module-replacement"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#热模块替换-hot-module-replacement"}},[t._v("#")]),t._v(" 热模块替换（Hot Module Replacement）")]),t._v(" "),s("blockquote",[s("p",[t._v("​📌​ "),s("strong",[t._v("提示：")])]),t._v(" "),s("p",[t._v("模块热替换功能一般用于开发环境。")])]),t._v(" "),s("p",[t._v("现在你有了实时重载功能，你甚至可以更进一步：Hot Module Replacement（热模块替换）。这是一个接口，使得你可以替换模块"),s("strong",[t._v("而不需要刷新页面")]),t._v("。不用每次修改都重新启动服务，这可以极大地提高开发效率。")]),t._v(" "),s("p",[t._v("那么，如何配置 webpack 来实现热替换呢？")]),t._v(" "),s("p",[t._v("请按以下步骤一步步来：")]),t._v(" "),s("p",[t._v("首先，安装依赖  "),s("code",[t._v("react-hot-loader")]),t._v("（确保使用这个包的 "),s("code",[t._v("next")]),t._v(" 版本）")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" --save babel-loader react-hot-loader@next\n")])])]),s("p",[s("strong",[t._v("配置 entry")])]),t._v(" "),s("p",[t._v("你需要定义几个用于热替换的入口路径")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("entry"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  main"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// App 入口")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./app/index"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 开启 React 代码的模块热替换(HMR)")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-hot-loader/patch'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 为 webpack-dev-server 的环境打包代码")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 然后连接到指定服务器域名与端口")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'webpack-dev-server/client?http://localhost:9000'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 为热替换(HMR)打包好代码")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// only- 意味着只有成功更新运行代码才会执行热替换(HMR)")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'webpack/hot/only-dev-server'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),s("p",[s("strong",[t._v("配置 output")])]),t._v(" "),s("p",[s("code",[t._v("publicPath")]),t._v(" 对于热替换(HMR)是必须的，让 webpack 知道在哪里载入热更新的模块(chunk)")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("output"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 对于热替换(HMR)是必须的，让 webpack 知道在哪里载入热更新的模块(chunk)")]),t._v("\n  publicPath"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),s("p",[s("strong",[t._v("配置 module")])]),t._v(" "),s("p",[t._v("需要使用 ES2015 模块来使 HMR 正常工作。为此，在我们的 es2015 preset 设置中，将 "),s("code",[t._v("module")]),t._v(" 选项设置为 false。")]),t._v(" "),s("p",[t._v("并且，在此要引入 "),s("code",[t._v("react-hot-loader/babel")]),t._v(" 开启 React 代码的模块热替换(HMR)")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("module"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    rules"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 语义解释器，将 js/jsx 文件中的 es2015/react 语法自动转为浏览器可识别的 Javascript 语法")]),t._v("\n        test"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token regex"}},[s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("\\.jsx?$")]),s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        include"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"app"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        exclude"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token regex"}},[s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("node_modules")]),s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 应该应用的 loader，它相对上下文解析")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 为了更清晰，`-loader` 后缀在 webpack 2 中不再是可选的")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 查看 webpack 1 升级指南。")]),t._v("\n        loader"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"babel-loader"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// loader 的可选项")]),t._v("\n        options"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          presets"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// webpack 现在已经支持原生的 import 语句了, 并且将其运用在 tree-shaking 特性上")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"es2015"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"modules"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n            "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 转译 React 组件为 JavaScript 代码")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          plugins"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react-hot-loader/babel"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 开启 React 代码的模块热替换(HMR)")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),s("p",[s("strong",[t._v("配置 devServer")])]),t._v(" "),s("p",[t._v("此处，也需要引入 "),s("code",[t._v("publicPath")]),t._v(" ，且和上文 "),s("code",[t._v("output")]),t._v(" 的 "),s("code",[t._v("publicPath")]),t._v(" 值保持一致。")]),t._v(" "),s("p",[s("code",[t._v("hot")]),t._v(" 属性需要置为 true，表示开启服务器的模块热替换。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("devServer"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  contentBase"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dist"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  compress"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  port"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 启动端口号")]),t._v("\n  hot"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 启用 webpack 的模块热替换特性")]),t._v("\n  inline"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  publicPath"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 和上文 output 的“publicPath”值保持一致")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[s("strong",[t._v("配置 plugins")])]),t._v(" "),s("p",[t._v("最后，需要开启 webpack 自带的 "),s("code",[t._v("HotModuleReplacementPlugin")]),t._v(" 和 "),s("code",[t._v("NamedModulesPlugin")]),t._v(" 插件，启动热替换功能。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("plugins"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 开启全局的模块热替换(HMR)")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("webpack"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HotModuleReplacementPlugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 当模块热替换(HMR)时在浏览器控制台输出对用户更友好的模块名字信息")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("webpack"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("NamedModulesPlugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("​🔦 "),s("strong",[t._v("示例DEMO13：")]),t._v(" ("),s("a",{attrs:{href:"https://github.com/dunwu/frontend-tutorial/tree/master/codes/chapter03/webpack2/demo13",target:"_blank",rel:"noopener noreferrer"}},[s("strong",[t._v("SOURCE")]),s("OutboundLink")],1),t._v(")")]),t._v(" "),s("p",[t._v("在示例中，启动服务后，打开浏览器，访问 http://localhost:9000/ 。")]),t._v(" "),s("p",[t._v("按快捷键 "),s("code",[t._v("F12")]),t._v(" 打开浏览器调试窗口，可以看到类似提示信息")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("[HMR] Waiting for update signal from WDS...\n[HMR] Waiting for update signal from WDS...\n[WDS] Hot Module Replacement enabled.\n")])])]),s("p",[t._v("这表示热替换功能已启动。")]),t._v(" "),s("p",[t._v("修改 "),s("code",[t._v("app/index.jsx")]),t._v(" 文件，来看看热替换的效果：")]),t._v(" "),s("p",[t._v("修改前：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("ReactDOM"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Welcome name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Zhang Peng"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"root"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("修改后：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("ReactDOM"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Welcome name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"guest"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"root"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("此时，应该看到页面内容会替换为你修改的内容。")])]),t._v(" "),s("h1",{attrs:{id:"webpack-系列教程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack-系列教程"}},[t._v("#")]),t._v(" Webpack 系列教程")]),t._v(" "),s("p",[t._v("欢迎阅读其它内容：")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/dunwu/frontend-tutorial/tree/master/docs/chapter03/webpack/concept.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("Webpack 概念"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/dunwu/frontend-tutorial/tree/master/docs/chapter03/webpack/webpack-tutorial.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("Webpack 入门"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/dunwu/frontend-tutorial/tree/master/docs/chapter03/webpack/asset-management.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("Webpack 资源管理"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/dunwu/frontend-tutorial/tree/master/docs/chapter03/webpack/code-splitting.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("Webpack 代码分离"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/dunwu/frontend-tutorial/tree/master/docs/chapter03/webpack/development.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("Webpack 开发工具"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=n.exports}}]);